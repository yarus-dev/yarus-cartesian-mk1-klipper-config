[gcode_macro INIT_VAR]
gcode:
  {% if "VARIABLE" not in params %}
    RESPOND type=error MSG="Missing VARIABLE parameter"
  {% elif "VALUE" not in params %}
    RESPOND type=error MSG="Missing VALUE parameter"
  {% else %}
    {% set vars = printer.save_variables.variables %}
    {% if params.VARIABLE not in vars %}
      SAVE_VARIABLE VARIABLE={params.VARIABLE} VALUE="{params.VALUE|replace("\"", "\\\"")}"
    {% endif %}
  {% endif %}