[gcode_macro RESUME]
description: Resumes the print from a pause, first restoring the previously captured position.
rename_existing: _BASE_RESUME
gcode:
    CLEAR_PAUSE

[gcode_macro RESUME]
rename_existing: _BASE_RESUME
description: Resume the print after an optional unretract
gcode:
    {% set St = printer["gcode_macro _USER_VARIABLES"].travel_speed %}

    {% if not printer.pause_resume.is_paused %}
        RESPOND MSG="Print is not paused. Resume ignored"
    {% else %}
        RESTORE_GCODE_STATE NAME=PRE_PAUSE_STATE MOVE=1 MOVE_SPEED={St}
        _BASE_RESUME
        CLEAR_PAUSE
    {% endif %}