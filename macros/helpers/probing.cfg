[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BASE_BED_MESH_CALIBRATE
description: Perform Mesh Bed Leveling with klicky automount
gcode:
    RESPOND MSG="Bed Mesh Calibrate"
    HOME
    ACTIVATE_PROBE
    _BASE_BED_MESH_CALIBRATE {% for p in params %}{'%s=%s ' % (p, params[p])}{% endfor %}
    M400
    DEACTIVATE_PROBE

[gcode_macro ACTIVATE_PROBE]
description: Put the machine in a state being able to probe
variable_temperature: 0
gcode:
    {% set LOCK = params.LOCK|default(False, boolean=true) %}

[gcode_macro DEACTIVATE_PROBE]
description: Revert the machine to a normal state after probing
gcode: